<!-- failuredetector_settings.jinja2 (The New, Stable Version) -->
<div id="settings_failuredetector">
    <h4><i class="fa fa-crosshairs"></i> Automatic Detection</h4>
    <div class="control-group">
        <label class="control-label">Enable Automatic Detection</label>
        <div class="controls">
            <label class="checkbox">
                <input type="checkbox" data-bind="checked: settings.plugins.failuredetector.detection.enabled">
                Check for failures automatically during a print.
            </label>
        </div>
    </div>
    
    <!-- ko with: settings.plugins.failuredetector.detection -->
    <div data-bind="enable: enabled">
        <div class="control-group">
            <label class="control-label">Detection Trigger</label>
            <div class="controls">
                <select data-bind="value: trigger">
                    <option value="timer">Timer</option>
                    <!-- ko if: octolapse_is_present -->
                    <option value="octolapse">Octolapse Frame</option>
                    <!-- /ko -->
                </select>
                <!-- ko ifnot: octolapse_is_present -->
                <span class="help-block">Install the Octolapse plugin to enable triggering on new frames.</span>
                <!-- /ko -->
            </div>
        </div>

        <div class="control-group" data-bind="enable: trigger() === 'timer'">
            <label class="control-label">Check Interval</label>
            <div class="controls">
                <div class="input-append">
                    <input type="number" min="5" class="input-small" data-bind="value: check_interval">
                    <span class="add-on">seconds</span>
                </div>
                <span class="help-block">How often to check for a failure when using the Timer trigger.</span>
            </div>
        </div>

        <div class="control-group">
            <label class="control-label">Failure Confidence Threshold</label>
            <div class="controls">
                <input type="number" min="0.5" max="1.0" step="0.05" class="input-small" data-bind="value: failure_confidence">
                <span class="help-block">A value from 0.5 to 1.0. Higher values are less sensitive. (e.g., 0.8 = 80%)</span>
            </div>
        </div>
    </div>
    <!-- /ko -->

    <hr>
    <h4><i class="fa fa-camera"></i> Webcam</h4>
    <div class="control-group">
        <label class="control-label">Webcam Snapshot URL</label>
        <div class="controls">
            <input type="text" class="input-block-level" data-bind="value: settings.plugins.failuredetector.webcam_snapshot_url">
        </div>
    </div>
</div>
